[
  {
    "$vectorSearch": {
      "exact": ${exact},
      "index": ${index},
      "limit": ${limit},
      "path": ${path},
      "queryVector": ${queryVector}
    }
  },
  {
      "$group": {
          "_id": "$doc_path",
          "doc_path": {"$first": "$doc_path"},
          "chunk_text": {"$first": "$chunk_text"},
          "embedding": {"$first": "$embedding"},
          "score": {"$first": "$score"}
      }
  },
  {
    "$project": {
      "_id": 0,
      "doc_path": 1,
      "chunk_text": 1,
      "score": { 
        "$meta": "vectorSearchScore" 
      }
    }
  },
  {
      "$sort": {"score": -1}
  },
  {
      "$limit": 2
  }
]